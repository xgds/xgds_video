{% extends 'xgds_video/map_recorded_playbacks.html' %}
{% load nav %}
{% load multiply %}
{% load static %}

{% block nav %}
    {% nav "xgds_video_live" %}
    {{ block.super }}
{% endblock %}

	
	{% block topStuff %}
    	<div id="topStuff" >
	    	<div id="infoTable" >
	    	<table>
	    		{% if episode %}
		   			<tr>
		   				<td> <b> Live Video for {{ settings.XGDS_PLANNER2_FLIGHT_MONIKER }}: </b> </td>
		   				<td> {{ episode.shortName }} </td>
		   			</tr>
	   			{% endif %}
	   		</table>
	   		</div>
   		</div>

 {% endblock topStuff %}
 
 {% block ribbonSlider %}
 		<fieldset id="videoFieldset">
		 	  <div id="masterSlider" class="masterSlider" ><br/></div>
 		</fieldset>
 {% endblock ribbonSlider %}
 
 {% block videodivs %}
 
 {% for source, noteform in zipped %}
        <div id="view-gridstack-item-{{source.name}}" class="grid-stack-item" 
		data-gs-x="{{ forloop.counter0|multiply:3 }}" data-gs-y="0"
        data-gs-width="{% if zipped|length > 1 %}3{% else %}6{%endif %}" data-gs-height="2" >
        <div class="grid-stack-item-content" id="view-gridstack-item-content-{{source.name}}" style="background-color:{{ source.displayColor }};">
	        	<ul class="nav justify-content-end">
					<i class="fa fa-refresh mr-1" title="Refresh Video Player" id="{{source.shortName}}_refreshVideoPlayer"></i>
	        		<i class="fa fa-lock pinDiv mr-1"></i>
	        		<i class="fa fa-window-close fa-lg"></i>
				</ul>
	            <div class="mt-negative-1rem" id="{{source.shortName}}_noteInput">
	                <strong class="big">{{ source.name }}</strong>
             		<a href="#" href="{% url 'xgds_video_live_source' source.shortName %}" target="{% if zipped.count > 1 %}{{episode.shortName}}_{{source.shortName}}{% else %}_blank{% endif %}" class="btn btn-primary"><i class="fa fa-window-restore fa-fw mr-1" aria-hidden="true"></i>New Window</a>
             		<!-- <section id="{{source.shortName}}_noteInput"> -->
             		{% include "xgds_video/video_notes.html" with data=noteform source=source.shortName color=source.displayColor %}
             		<!-- </section> -->
             		
	            </div>
             	<!--embed the video-->
             	<section>
              		<div id="player_container" class="nav justify-content-center"> 
             			<div id="{{ source.shortName }}" ></div>
             		</div> <!--  player-container -->
             		<div id="{{ source.shortName }}Label" > </div> <!-- style="float:left;text-align:left;" -->
             	</section>
            </div><!--  item -->
        </div>
        {% endfor %}

	{% endblock videodivs %}
 
{% block scripts %}
	{{block.super}}
	{% block videoscripts %}
	<script type="text/javascript" src="{% static 'xgds_video/js/liveVideoPlayer.js' %}"></script>
	<script type="text/javascript" src="{% static 'xgds_notes2/js/recordedNotesTable.js' %}"></script>
    {% endblock videoscripts %}
{% endblock %}

{% block jsInitVideo %}
	{% for source, noteForm in zipped %}
		xgds_video.buildLiveJWPlayer('{{source.name}}', '{{source.videofeed_set.first.realtimeUrl}}', '{{source.videofeed_set.first.settings.aspectRatio}}');
		xgds_notes.setupNotesUI($("#{{source.name}}_noteInput"));
	{% endfor %}
{% endblock jsInitVideo %}


<!--  FROM DAVE 

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JW Player</title>
    <script src="/data/jwplayer7/jwplayer.js"></script>
    <script>jwplayer.key = "rQsqsr2UQLOPJVt9QUrY3ZQLn2miRGlFj7oNEw==";</script>
</head>
<body>
<div id="player"></div>

<script>
    jwplayer("player").setup({
        primary: 'flash',
        sources: [{
            file: "rtmp://10.10.80.49:1935/live/mp4:stream1_snrf.sdp"
        }],
        width:1280,
        height:720,
        rtmp: {
            bufferlength: 1.0
        }
    });
</script>

</body>
</html>

 -->